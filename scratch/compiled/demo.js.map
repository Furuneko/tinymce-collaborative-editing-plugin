{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/demo/ts/Demo.ts","webpack:///./src/main/ts/Plugin.ts","webpack:///./src/main/ts/core/collaborative.ts"],"names":[],"mappings":"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","file":"demo.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/demo/ts/Demo.ts\");\n","import Plugin from '../../main/ts/Plugin';\n\ndeclare let tinymce: any;\n\nPlugin();\n\ntinymce.init({\n  selector: 'textarea.tinymce',\n  plugins: 'code budwriter',\n  budwriter: {\n    name: 'Andre',\n    photoUrl: 'https://www.biggalyoga.com/wp-content/uploads/2018/07/profilecircle-768x814.png',\n    key: 'free4all'\n  },\n  toolbar: 'budwriter',\n  height : \"600\",\n  branding: false\n});\n","import { Editor } from 'tinymce';\nimport { CollaborativeEditing } from './core/collaborative';\nimport { User } from './interfaces/user.interfaces';\n\ndeclare const tinymce: any;\nlet user: User;\n\ntinymce.create('tinymce.plugins.Budwriter', {\n  Budwriter: (editor: Editor, url: string) => {\n    const collaborativeEditing = new CollaborativeEditing(editor);\n    editor.on('Load', function (event: Event) {\n      const textEditor: HTMLElement = document.querySelector('.tinymce');\n      textEditor.parentElement.onresize = (event: Event) => { collaborativeEditing.onResize(event); }\n\n      user = JSON.parse(JSON.stringify(editor.getParam('budwriter')));\n      collaborativeEditing.setUser(user);\n    });\n\n    editor.on('click', (event: Event) => {\n      collaborativeEditing.onListen(event, user);\n    });\n\n    editor.on('keyup', (event: Event) => {\n      collaborativeEditing.onListen(event, user);\n    });\n  }\n});\n\nexport default () => {\n  tinymce.PluginManager.add('budwriter', tinymce.plugins.Budwriter);\n};\n","import { Editor } from 'tinymce';\nimport { User } from '../interfaces/user.interfaces';\n\nexport class CollaborativeEditing {\n  /**\n   * TinyMCE default editor\n   */\n  editor: Editor;\n\n  /**\n   * Real time\n   */\n  myUser: User;\n  users: User[];\n  cursors: Map<number, {\n    range: Range,\n    node: HTMLElement\n  }>;\n  selections: Map<number, {\n    user: User,\n    range: Range\n  }>;\n  colors: Map<string, string>;\n\n  constructor(editor: Editor) {\n    this.editor = editor;\n\n    this.cursors = new Map();\n    this.selections = new Map();\n    this.colors = new Map();\n  }\n\n  /**\n   * Sets a user in the tinymce editor\n   */\n  setUser(user: User) {\n    const exists = true;\n    while (exists) {\n      const randomColor = this.getRandomColor();\n      let isColorPresent = false;\n      this.colors.forEach((color, key) => {\n        if (randomColor === color) {\n          isColorPresent = true;\n        }\n      });\n      if (!isColorPresent) {\n        this.colors.set(user.name, randomColor);\n        break;\n      }\n    }\n\n    const container = document.createElement('div');\n    container.id = `container-${this.hash(user.name)}`\n    container.style.display = 'flex';\n    container.style.position = 'relative';\n    container.style.cursor = 'pointer';\n    container.style.width = '35px';\n    container.style.alignItems = 'center';\n\n    container.addEventListener(\"mouseover\", (event: Event & { target: HTMLElement }) => {\n      (event.target.children[1] as HTMLElement).style.visibility = 'visible';\n    });\n\n    container.addEventListener(\"mouseout\", (event: Event & { target: HTMLElement }) => {\n      (event.target.children[1] as HTMLElement).style.visibility = 'hidden';\n    });\n\n    if (user.photoUrl && user.photoUrl.length > 0) {\n      const avatar = document.createElement('img');\n      avatar.id = `avatar-${user.name}`;\n      avatar.src = user.photoUrl;\n      avatar.style.height = '38px';\n      avatar.style.width = '35px';\n      avatar.style.borderRadius = '35px';\n      avatar.style.marginBottom = '10px';\n      avatar.style.pointerEvents = 'none';\n\n      container.appendChild(avatar);\n    } else {\n      const avatar = document.createElement('div');\n      avatar.id = `avatar-${user.name}`;\n      avatar.style.height = '30px';\n      avatar.style.width = '30px';\n      avatar.style.borderRadius = '30px';\n      avatar.style.backgroundColor = this.colors.get(user.name);\n      avatar.style.pointerEvents = 'none';\n      avatar.style.textAlign = 'center';\n      avatar.style.color = 'white';\n      avatar.style.opacity = '70%';\n      avatar.style.display = 'flex';\n      avatar.style.alignItems = 'center';\n      avatar.style.justifyContent = 'center';\n      avatar.style.marginBottom = '10px';\n      avatar.innerText = user.name.charAt(0);\n\n      container.appendChild(avatar);\n    }\n\n    const text = document.createElement('span');\n    text.id = `text-${user.name}`;\n    text.textContent = user.name;\n    text.style.visibility = 'hidden';\n    text.style.position = 'absolute';\n    text.style.pointerEvents = 'none';\n    text.style.verticalAlign = 'center';\n    text.style.backgroundColor = this.colors.get(user.name);\n    text.style.opacity = '70%';\n    text.style.color = 'white';\n    text.style.fontSize = '9px';\n    text.style.paddingTop = '9px';\n    text.style.paddingBottom = '9px';\n    text.style.width = user.name.length * 7 + 'px';\n    text.style.textAlign = 'center';\n    text.style.left = '35px';\n    text.style.borderRadius = '5px';\n    text.style.marginBottom = '10px';\n\n    container.appendChild(text);\n\n    const textEditor: HTMLElement = document.querySelector('.tinymce');\n    textEditor.parentElement.insertBefore(container, textEditor);\n  }\n\n  /**\n   * Listens all kinds of input in editor\n   * 1. Keyboard\n   * 2. Copy paste\n   * 3. Up/Down\n   */\n  onListen(event: Event, user: User): void {\n    let selection: Selection = this.editor.getDoc().getSelection();\n    let range: Range = selection.getRangeAt(0);\n\n    this.deleteUserInteractions(user);\n\n    if (range.startOffset === range.endOffset) {\n      this.moveCursor(event, range, user);\n    } else {\n      this.moveSelection(event, range, user);\n    }\n  }\n\n  /**\n   * Removes user cursor or selections\n   * @param user User\n   */\n  private deleteUserInteractions(user: User) {\n    const cursor: HTMLDivElement = this.editor.getDoc().querySelector(`#cursor-${this.hash(user.name)}`);\n    if (cursor) {\n      cursor.remove();\n    }\n\n    const selections = this.editor.getDoc().querySelectorAll(`#selection-${this.hash(user.name)}`);\n    if (selections && selections.length > 0) {\n      selections.forEach((selection) => {\n        selection.remove();\n      });\n    }\n  }\n\n  /**\n   * Moves cursor to desired position\n   * @param event Event\n   * @param range Range selection\n   * @param user User\n   */\n  private moveCursor(event: Event, range: Range, user: User): void {\n    let node: HTMLElement = <HTMLElement>this.editor.selection.getNode();\n    const userId = this.hash(user.name);\n\n    const cursorId = `cursor-${userId}`;\n    let cursor: HTMLDivElement = document.createElement('div');\n    cursor.id = cursorId;\n    cursor.style.position = 'absolute';\n    cursor.style.zIndex = '-1';\n    cursor.style.position = 'block';\n\n    const cursorBar: HTMLDivElement = document.createElement('div')\n    cursorBar.style.backgroundColor = this.colors.get(user.name);\n    cursorBar.style.opacity = '60%';\n    cursorBar.style.width = '2.5px';\n    cursorBar.style.height = range.getBoundingClientRect().height + 'px';\n    cursorBar.style.position = 'relative';\n\n    const cursorText: HTMLSpanElement = document.createElement('span')\n    cursorText.style.backgroundColor = this.colors.get(user.name);\n    cursorText.style.color = 'white';\n    cursorText.style.fontSize = '10px';\n    cursorText.style.height = '12px';\n    cursorText.textContent = user.name;\n    cursorText.style.position = 'absolute';\n    cursorText.style.top = '-12px';\n\n    cursorBar.appendChild(cursorText);\n    cursor.appendChild(cursorBar);\n\n    if (range.getBoundingClientRect().top === 0) {\n      cursor.style.top = node.offsetTop + 'px';\n      cursor.style.left = '1em';\n    } else {\n      cursor.style.top = this.editor.getDoc().children[0].scrollTop + range.getBoundingClientRect().top + 'px';\n      cursor.style.left = range.getBoundingClientRect().left + 'px';\n    }\n\n    const body: HTMLElement = this.editor.getDoc().body;\n    body.parentElement.insertBefore(cursor, body);\n\n    this.cursors.set(userId, { range: range.cloneRange(), node });\n    this.selections.delete(userId);\n  }\n\n  /**\n   * Moves selection to desired lines\n   * @param event Event\n   * @param range Range selection\n   * @param user User\n   */\n  private moveSelection(event: Event, range: Range, user: User): void {\n    const body: HTMLElement = this.editor.getDoc().body;\n\n    const selectionId = `selection-${this.hash(user.name)}`;\n    const ranges = range.getClientRects();\n\n    for (let i = 0; i < ranges.length; i++) {\n      const selection = document.createElement('span');\n      selection.id = selectionId;\n      selection.style.backgroundColor = this.colors.get(user.name);\n      selection.style.opacity = '50%';\n      selection.style.position = 'absolute';\n      selection.style.width = ranges[i].width + 'px';\n      selection.style.height = ranges[i].height + 'px';\n      selection.style.top = ranges[i].y + 'px';\n      selection.style.left = ranges[i].x + 'px';\n      selection.style.zIndex = '-1';\n\n      if (i === 0) {\n        const selectionText: HTMLSpanElement = document.createElement('span')\n        selectionText.style.backgroundColor = this.colors.get(user.name);\n        selectionText.style.color = 'white';\n        selectionText.style.fontSize = '10px';\n        selectionText.style.height = '14px';\n        selectionText.textContent = user.name;\n        selectionText.style.position = 'absolute';\n        selectionText.style.top = '-14px';\n\n        selection.appendChild(selectionText);\n      }\n\n      body.parentElement.insertBefore(selection, body);\n    }\n\n    this.selections.set(this.hash(user.name), {\n      range, user\n    });\n    this.cursors.delete(this.hash(user.name));\n  }\n\n  /**\n   * On Resize Event\n   * @param event Event\n   */\n  onResize(event: Event): void {\n    this.cursors.forEach(({ range, node }, key) => {\n      const element: HTMLDivElement = this.editor.getDoc().querySelector(`#cursor-${key}`);\n      if (range.getBoundingClientRect().top === 0) {\n        element.style.top = node.offsetTop + 'px';\n        element.style.left = '1em';\n      } else {\n        element.style.top = this.editor.getDoc().children[0].scrollTop + range.getBoundingClientRect().top + 'px';\n        element.style.left = range.getBoundingClientRect().left + 'px';\n      }\n    });\n\n    this.selections.forEach(({ range, user }, key: number) => {\n      this.deleteUserInteractions(user);\n      this.moveSelection(null, range, user);\n    });\n  }\n\n  /**\n   * Basic hash function\n   * @param username User name\n   */\n  private hash(username: string): number {\n    let hash = 0;\n    if (username.length == 0) {\n      return hash;\n    }\n    for (var i = 0; i < username.length; i++) {\n      var char = username.charCodeAt(i);\n      hash = ((hash << 5) - hash) + char;\n      hash = hash & hash;\n    }\n    return hash;\n  }\n\n  /**\n   * Generates random color when user enters the application\n   */\n  getRandomColor() {\n    const letters = '0123456789ABCDEF';\n    let color = '#';\n    for (let i = 0; i < 6; i++) {\n      color += letters[Math.floor(Math.random() * 16)];\n    }\n    return color;\n  }\n}"],"sourceRoot":""}